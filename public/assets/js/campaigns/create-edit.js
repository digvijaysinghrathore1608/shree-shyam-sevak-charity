document.addEventListener("DOMContentLoaded",(function(){if($("#campaignStartDate").length&&$("#campaignStartDate").flatpickr({dateFormat:"Y-m-d "}),$("#campaignDeadlineDate").length&&$("#campaignDeadlineDate").flatpickr({dateFormat:"Y-m-d "}),$("#campaignCreateTitle").length&&$("#campaignCreateSlug").length&&$("#campaignCreateTitle").keyup((function(){var e=$("#campaignCreateTitle").val();$("#campaignCreateSlug").val(e.toLowerCase().replace(/\s+/g,"_"))})),$("#campaignDescriptionCreateId").length){var e=new Quill("#campaignDescriptionCreateId",{modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline"],["image","code-block"]]},placeholder:"Description",theme:"snow"});e.on("text-change",(function(a,t,i){0===e.getText().trim().length&&e.setContents([{insert:""}]),$("#campaignCreateDescription").val(e.root.innerHTML)}))}if(isEdit&&$("#editCampaignDescriptionId").length){if($("#editCampaignDescriptionId").length){var a=new Quill("#editCampaignDescriptionId",{modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline"],["image","code-block"]]},placeholder:"Description",theme:"snow"});a.on("text-change",(function(e,t,i){0===a.getText().trim().length&&a.setContents([{insert:""}]),$("#editCampaignDescription").val(a.root.innerHTML)}));var t=document.createElement("textarea");t.innerHTML=editCampaignDescription,a.root.innerHTML=t.value}if($("#campaignImageDropZone").length){var i=$("#campaignId").val();new Dropzone("#campaignImageDropZone",{url:route("campaign.file.store",i),paramName:"file",method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},maxFiles:10,acceptedFiles:".jpg, .jpeg, .png",maxFilesize:10,addRemoveLinks:!0,removedfile:function(e){var a,t=e.name;return $.ajax({type:"POST",url:route("remove.campaign.file"),data:{file:t,id:i},success:function(e){e.success&&displaySuccessMessage(e.message)}}),null!=(a=e.previewElement)?a.parentNode.removeChild(e.previewElement):void 0},init:function(){var e=this;$.ajax({url:route("get.campaign.file",i),type:"get",dataType:"json",success:function(a){$.each(a.data,(function(a,t){var i={name:t.name,size:t.size};e.emit("addedfile",i),e.emit("complete",i),e.emit("thumbnail",i,t.url)}))}})}})}}})),listen("submit","#editCampaignFieldForm",(function(e){e.preventDefault();var a=$("#campaignId").val();$.ajax({url:route("update.field",a),method:"POST",data:$(this).serialize(),success:function(e){e.success&&(displaySuccessMessage(e.message),$("#addDefineGoal").removeClass("active show"),$("#addGallery").addClass("active show"),$("#addGalleryBtn").addClass("active"),$("#addDefineGoalBtn").removeClass("active"))}})}));